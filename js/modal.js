"use strict";!function(){var d=function(e){var t="+7 (___) ___-__-__",r=e.target,o=t.replace(/\D/g,""),a=r.value.replace(/\D/g,""),l=0;r.setCustomValidity(""),o.length>=a.length&&(a=o),r.value=t.replace(/./g,function(e){return/[_\d]/.test(e)&&l<a.length?a.charAt(l++):l>=a.length?"":e}),function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var r=t.createTextRange();r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select()}}(r.value.length,r)},i=function(){var e=document.querySelector("#mail");if(document.querySelector(".error__message--mail")){var t=document.querySelector(".error__message--mail");t.parentNode.removeChild(t)}e.setCustomValidity(""),e.value?e.value.match("^[A-Za-z0-9][A-Za-z0-9.-_]*[A-Za-z0-9]*@([A-Za-z0-9]+([A-Za-z0-9-]*[A-Za-z0-9]+)*.)+[A-Za-z]*$")?(e.setAttribute("style","border: 2px solid rgb(0, 255, 0)"),e.setCustomValidity("")):(e.setCustomValidity("Укажите корректный e-mail"),e.setAttribute("style","border: 2px solid rgb(255, 0, 0)"),e.insertAdjacentHTML("afterend",'<p class="error__message error__message--mail">Укажите корректный e-mail</p>')):(e.setCustomValidity("Поле не должно быть пустым"),e.setAttribute("style","border: 2px solid rgb(255, 0, 0)"),e.insertAdjacentHTML("afterend",'<p class="error__message error__message--mail">Поле не должно быть пустым</p>'))},u=function(){var e=document.querySelector("#name");if(document.querySelector(".error__message--name")){var t=document.querySelector(".error__message--name");t.parentNode.removeChild(t)}e.setCustomValidity(""),e.value?(e.setAttribute("style","border: 2px solid rgb(0, 255, 0)"),e.setCustomValidity("")):(e.setCustomValidity("Поле не должно быть пустым"),e.setAttribute("style","border: 2px solid rgb(255, 0, 0)"),e.insertAdjacentHTML("afterend",'<p class="error__message error__message--name">Поле не должно быть пустым</p>'))},p=function(){var e=document.querySelector("#phone");if(document.querySelector(".error__message--phone")){var t=document.querySelector(".error__message--phone");t.parentNode.removeChild(t)}e.setCustomValidity(""),2===e.value.length?(e.value="",e.setCustomValidity("Поле не должно быть пустым"),e.setAttribute("style","border: 2px solid rgb(255, 0, 0)"),e.insertAdjacentHTML("afterend",'<p class="error__message error__message--phone">Поле не должно быть пустым</p>')):e.value.length<18?(e.setCustomValidity("Укажите корректный номер"),e.insertAdjacentHTML("afterend",'<p class="error__message error__message--phone">Укажите корректный номер</p>'),e.setAttribute("style","border: 2px solid rgb(255, 0, 0)")):(e.setAttribute("style","border: 2px solid rgb(0, 255, 0)"),e.setCustomValidity(""))},e=document.querySelector(".promo__button"),c=document.querySelector("body"),m=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]},_=function(){var e=document.querySelector(".modal-popup"),t=document.querySelector(".modal-overlay");e.classList.add("modal-popup--close"),t.classList.add("modal-overlay--close"),setTimeout(function(){c.removeChild(e),c.removeChild(t)},400)},v=function e(t){document.querySelector(".modal")&&27===t.keyCode&&(_(),document.removeEventListener("keydown",e))},y=function(){_()};e.addEventListener("click",function(){var r=m('<div class="modal-popup">\n    <buttton class="modal-popup__close">Закрыть</buttton>\n    <h2 class="modal-popup__header">Заполните форму</h2>\n    <form class="modal-popup__wrapper" action="send.php" method="post" enctype="multipart/form-data">\n      <div class="modal-popup__group">\n        <label class="modal-popup__label" for="name">Имя</label>\n        <input class="modal-popup__input" type="text" id="name" name="name" placeholder="Как к Вам можно обращаться" required="true">\n      </div>\n      <div class="modal-popup__group">\n        <label class="modal-popup__label" for="phone">Телефон</label>\n        <input class="modal-popup__input" type="text" id="phone" name="phone" placeholder="+7(___)___-__-__" required="true">\n      </div>\n      <div class="modal-popup__group">\n        <label class="modal-popup__label" for="mail">E-mail</label>\n        <input class="modal-popup__input" type="text" id="mail" name="mail" placeholder="Укажите e-mail" required="true">\n      </div>\n      <div class="modal-popup__group modal-popup__group--wide">\n        <label class="modal-popup__label" for="text">Сообщение</label>\n        <textarea class="modal-popup__input" type="text" id="text" name="text" placeholder="Текст сообщения"></textarea>\n      </div>\n      <button class="main-button modal-popup__submit" type="submit">Отправить</button>\n    </form>\n  </div>'),e=m('<div class="modal-overlay"></div>');c.insertAdjacentElement("beforeEnd",r),c.insertAdjacentElement("beforeEnd",e);var o=r.querySelectorAll("input"),t=r.querySelector(".modal-popup__close"),a=r.querySelector(".modal-popup__submit"),l=r.querySelector("#phone"),n=r.querySelector("#mail"),s=r.querySelector("#name");document.addEventListener("keydown",v),r.querySelector("#phone").addEventListener("input",d,!1),l.addEventListener("blur",p,!1),n.addEventListener("blur",i,!1),s.addEventListener("blur",u,!1),e.addEventListener("click",y),t.addEventListener("click",function(){_()}),a.addEventListener("click",function(e){e.preventDefault();var t=r.querySelector(".modal-popup__wrapper");l.addEventListener("blur",p(),!1),n.addEventListener("blur",i(),!1),s.addEventListener("blur",u(),!1),Array.from(o).every(function(e){return!1!==e.checkValidity()})&&(t.submit(),_(),function(){var e=m('<div class="modal-popup modal-popup--confirm">\n            <buttton class="modal-popup__close">Закрыть</buttton>\n            <h2 class="modal-popup__header">Заполните форму</h2>\n         </div>'),t=m('<div class="modal-overlay"></div>');c.insertAdjacentElement("beforeEnd",e),c.insertAdjacentElement("beforeEnd",t);var r=e.querySelector(".modal-popup__close");document.addEventListener("keydown",v),t.addEventListener("click",y),r.addEventListener("click",function(){_()})}())})})}();